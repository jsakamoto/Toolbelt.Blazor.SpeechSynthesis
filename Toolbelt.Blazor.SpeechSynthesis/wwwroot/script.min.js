const r="undefined",u="end",f="error",e="cancel",n=window.speechSynthesis||{paused:!1,pending:!1,speaking:!1},t=typeof n.getVoices!==r,s=t&&n.getVoices().length===0?new Promise(t=>{typeof n.addEventListener===r&&t(),n.addEventListener("voiceschanged",()=>{n.getVoices().length>0&&t()})}):Promise.resolve();let i=[];export const getStatus=()=>({available:t,paused:n.paused,pending:n.pending,speaking:n.speaking});const o=async()=>t?(await s,n.getVoices()):[];export const getNumberOfVoices=async()=>{const n=await o();return n.length},getVoices=async n=>{const i=await o(),t=i.map(n=>({"default":n.default,lang:n.lang,localService:n.localService,name:n.name,voiceURI:n.voiceURI}));return n?t.slice(n.begin,n.end):t},speak=(r,o)=>{if(!t)return getStatus();if(r.voice!==null){const t=r.voice.voiceURI,i=r.voice.lang;r.voice=n.getVoices().find(n=>n.voiceURI===t&&n.lang.replace(/_/ig,"-")===i)}r=Object.assign(new SpeechSynthesisUtterance,r);const h=["boundary",u,f,"mark","pause","resume","start"],s=function(n){const t=getStatus();o.invokeMethodAsync("InvokeEvent",n.type,t);(n.type===u||n.type===f||n.type===e)&&(h.forEach(n=>r.removeEventListener(n,s)),i=i.filter(n=>n.f!==s))};return h.forEach(n=>r.addEventListener(n,s)),i.push({f:s}),n.speak(r),setTimeout(()=>{const n=i.filter(n=>n.cancel===!0);n.forEach(n=>n.f({type:e}))},0),getStatus()},cancel=()=>(t&&(n.cancel(),i.forEach(n=>n.cancel=!0)),getStatus()),pause=()=>(t&&n.pause(),getStatus()),resume=()=>(t&&n.resume(),getStatus());((t,i)=>{function r(){try{const t=new SpeechSynthesisUtterance("");t.volume=0;n.speak(t)}catch(u){console.error(u)}t.removeEventListener(i,r)}t.addEventListener(i,r)})(document.body,"click");